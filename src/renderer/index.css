@import './tailwind.css';
@import './styles/theme.sass';
@import './styles/wide-classes.css';

@theme {
    --color-primary: #e11d48;
    --color-primary-light: #fb7185;
    --color-primary-dark: #be123c;
    --color-primary-hover: #f43f5e;
    --color-primary-50: #fff1f2;
    --color-primary-100: #ffe4e6;
    --color-primary-200: #fecdd3;
    --color-primary-300: #fda4af;
    --color-primary-400: #fb7185;
    --color-primary-500: #f43f5e;
    --color-primary-600: #e11d48;
    --color-primary-700: #be123c;
    --color-primary-800: #9f1239;
    --color-primary-900: #881337;

    --color-bg-base: #ffffff;
    --color-bg-secondary: #fef2f2;
    --color-bg-tertiary: #fee2e2;
    --color-bg-elevated: #fafafa;

    --color-text-primary: #1e293b;
    --color-text-secondary: #64748b;
    --color-text-tertiary: #94a3b8;
    --color-text-inverse: #ffffff;

    --color-border-light: #fecdd3;
    --color-border-base: #fda4af;
    --color-border-strong: #fb7185;

    --shadow-primary-sm: 0 1px 2px 0 rgba(225, 29, 72, 0.05);
    --shadow-primary: 0 4px 6px -1px rgba(225, 29, 72, 0.1), 0 2px 4px -1px rgba(225, 29, 72, 0.06);
    --shadow-primary-md: 0 10px 15px -3px rgba(225, 29, 72, 0.1), 0 4px 6px -2px rgba(225, 29, 72, 0.05);
    --shadow-primary-lg: 0 20px 25px -5px rgba(225, 29, 72, 0.1), 0 10px 10px -5px rgba(225, 29, 72, 0.04);
    --shadow-primary-xl: 0 25px 50px -12px rgba(225, 29, 72, 0.25);

    --transition-duration-fast: 150ms;
    --transition-duration-base: 250ms;
    --transition-duration-slow: 350ms;

    --transition-timing-function-smooth: cubic-bezier(0.4, 0, 0.2, 1);
    --transition-timing-function-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
    --transition-timing-function-in-out: cubic-bezier(0.645, 0.045, 0.355, 1);
}

html,
body,
#root {
    height: 100%;
    overflow: hidden;
}

/* Закругление углов для окон без системных декораций (Windows) */
/* html и body должны быть прозрачными, закругление на #root */
html[data-window-type="main"],
html[data-window-type="result"],
html[data-window-type="error"] {
    background: transparent !important;
}

html[data-window-type="main"] body,
html[data-window-type="result"] body,
html[data-window-type="error"] body {
    background: transparent !important;
}

html[data-window-type="main"] #root,
html[data-window-type="result"] #root,
html[data-window-type="error"] #root {
    border-radius: 8px;
    overflow: hidden;
    background: var(--color-bg-base);
}

body {
    margin: 0;
    @apply bg-bg-base text-text-primary font-sans;
}

/* Переопределяем фон для прозрачных окон */
html[data-window-type="main"] body,
html[data-window-type="result"] body,
html[data-window-type="error"] body {
    background: transparent !important;
}

body.body-transparent {
    background: transparent !important;
}

body.body-transparent #root {
    background: transparent !important;
}

html[data-mic-window="true"],
html[data-mic-window="true"] body,
html[data-mic-window="true"] body #root {
    background: transparent !important;
    border-radius: 0 !important;
    pointer-events: none;
}

.markdown-compact {
    font-size: 0.875rem;
    line-height: 1.5;
    word-break: break-word;
}

.markdown-compact > :first-child {
    margin-top: 0;
}

.markdown-compact > :last-child {
    margin-bottom: 0;
}

.markdown-compact p {
    margin: 0;
}

.community-link {
    transition:
        transform var(--transition-duration-base) var(--transition-timing-function-smooth),
        background-color var(--transition-duration-base) var(--transition-timing-function-smooth),
        border-color var(--transition-duration-base) var(--transition-timing-function-smooth);
}

.community-link:hover {
    transform: translateY(-2px);
}

.community-link-icon {
    transition: transform var(--transition-duration-base) var(--transition-timing-function-smooth);
}

.community-link:hover .community-link-icon {
    transform: scale(1.05);
}

.markdown-compact p + p {
    margin-top: 0.5rem;
}

.markdown-compact h1,
.markdown-compact h2,
.markdown-compact h3,
.markdown-compact h4,
.markdown-compact h5,
.markdown-compact h6 {
    margin: 0.75rem 0 0.35rem;
    font-weight: 600;
    line-height: 1.3;
}

.markdown-compact h1 {
    font-size: 1.1rem;
}

.markdown-compact h2 {
    font-size: 1.05rem;
}

.markdown-compact h3 {
    font-size: 1rem;
}

.markdown-compact ul,
.markdown-compact ol {
    margin: 0.5rem 0;
    padding-left: 1.25rem;
}

.markdown-compact li {
    margin: 0.2rem 0;
}

.markdown-compact a {
    color: var(--color-primary-600);
    text-decoration: underline;
    text-decoration-thickness: 1px;
}

.markdown-compact code {
    padding: 0.1rem 0.3rem;
    border-radius: 6px;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border-light);
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}

.markdown-compact pre {
    margin: 0.6rem 0;
    padding: 0.6rem 0.75rem;
    border-radius: 8px;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border-light);
    overflow-x: auto;
}

.markdown-compact pre code {
    padding: 0;
    border: 0;
    background: transparent;
}

.markdown-compact blockquote {
    margin: 0.6rem 0;
    padding-left: 0.75rem;
    border-left: 2px solid var(--color-border-base);
    color: var(--color-text-secondary);
}

.overflow-y-auto {
    scrollbar-width: thin;
    scrollbar-color: var(--color-primary-400) rgba(244, 63, 94, 0.12);
}

.overflow-y-auto::-webkit-scrollbar {
    width: 10px;
}

.overflow-y-auto::-webkit-scrollbar-track {
    background: linear-gradient(180deg, rgba(255, 241, 242, 0.95), rgba(254, 226, 226, 0.65));
    border-radius: 9999px;
    box-shadow: inset 0 0 0 1px rgba(244, 63, 94, 0.08);
}

.overflow-y-auto::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, var(--color-primary-500), var(--color-primary-400)) !important;
    border-radius: 9999px;
    border: 2px solid rgba(255, 241, 242, 0.9) !important;
    box-shadow: inset 0 1px 2px rgba(255, 255, 255, 0.4) !important;
    transition: background var(--transition-duration-base) var(--transition-timing-function-smooth),
    box-shadow var(--transition-duration-base) var(--transition-timing-function-smooth);
}

.overflow-y-auto::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, var(--color-primary-500), var(--color-primary-400)) !important;
    box-shadow: inset 0 1px 2px rgba(255, 255, 255, 0.5), 0 0 6px rgba(244, 63, 94, 0.15) !important;
}

.overflow-y-auto::-webkit-scrollbar-thumb:active {
    background: linear-gradient(180deg, var(--color-primary-700), var(--color-primary-500));
    box-shadow: inset 0 1px 2px rgba(255, 255, 255, 0.25), 0 0 4px rgba(190, 18, 60, 0.4);
}

/* Тонкий scrollbar для History секций */
.history-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: #fb7185 rgba(244, 63, 94, 0.12);
}

.history-scrollbar::-webkit-scrollbar {
    width: 4px;
}

.history-scrollbar::-webkit-scrollbar-track {
    background: linear-gradient(180deg, rgba(255, 241, 242, 0.95), rgba(254, 226, 226, 0.65));
    border-radius: 9999px;
    box-shadow: inset 0 0 0 1px rgba(244, 63, 94, 0.08);
}

.history-scrollbar::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, var(--color-primary-500), var(--color-primary-400)) !important;
    border-radius: 9999px;
    border: 1px solid rgba(255, 241, 242, 0.9) !important;
    box-shadow: inset 0 1px 2px rgba(255, 255, 255, 0.4) !important;
    transition: background var(--transition-duration-base) var(--transition-timing-function-smooth),
    box-shadow var(--transition-duration-base) var(--transition-timing-function-smooth);
}

.history-scrollbar::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, var(--color-primary-500), var(--color-primary-400)) !important;
    box-shadow: inset 0 1px 2px rgba(255, 255, 255, 0.5), 0 0 6px rgba(244, 63, 94, 0.15) !important;
}

.mic-context-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: rgba(244, 63, 94, 0.85) rgba(244, 63, 94, 0.15);
    scrollbar-gutter: stable;
}

.mic-context-scrollbar::-webkit-scrollbar {
    width: 6px;
}

.mic-context-scrollbar::-webkit-scrollbar-track {
    background: rgba(244, 63, 94, 0.12);
    border-radius: 9999px;
}

.mic-context-scrollbar::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, rgba(244, 63, 94, 0.95), rgba(225, 29, 72, 0.95));
    border-radius: 9999px;
    border: 1px solid rgba(255, 255, 255, 0.35);
}

.mic-context-scrollbar::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, rgba(244, 63, 94, 1), rgba(190, 18, 60, 0.95));
}

/* Стили скроллбара для меню MUI Select */
.MuiMenu-paper,
.MuiPopover-paper,
.MuiMenuList-root {
    scrollbar-width: thin;
    scrollbar-color: var(--color-primary-400) rgba(244, 63, 94, 0.12);
}

.MuiMenu-paper::-webkit-scrollbar,
.MuiPopover-paper::-webkit-scrollbar,
.MuiMenuList-root::-webkit-scrollbar {
    width: 10px;
}

.MuiMenu-paper::-webkit-scrollbar-track,
.MuiPopover-paper::-webkit-scrollbar-track,
.MuiMenuList-root::-webkit-scrollbar-track {
    background: linear-gradient(180deg, rgba(255, 241, 242, 0.95), rgba(254, 226, 226, 0.65));
    border-radius: 9999px;
    box-shadow: inset 0 0 0 1px rgba(244, 63, 94, 0.08);
}

.MuiMenu-paper::-webkit-scrollbar-thumb,
.MuiPopover-paper::-webkit-scrollbar-thumb,
.MuiMenuList-root::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, var(--color-primary-500), var(--color-primary-400)) !important;
    border-radius: 9999px;
    border: 2px solid rgba(255, 241, 242, 0.9) !important;
    box-shadow: inset 0 1px 2px rgba(255, 255, 255, 0.4) !important;
    transition: background var(--transition-duration-base) var(--transition-timing-function-smooth),
    box-shadow var(--transition-duration-base) var(--transition-timing-function-smooth);
}

.MuiMenu-paper::-webkit-scrollbar-thumb:hover,
.MuiPopover-paper::-webkit-scrollbar-thumb:hover,
.MuiMenuList-root::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, var(--color-primary-500), var(--color-primary-400)) !important;
    box-shadow: inset 0 1px 2px rgba(255, 255, 255, 0.5), 0 0 6px rgba(244, 63, 94, 0.15) !important;
}

.app-region-drag {
    -webkit-app-region: drag;
}

.app-region-no-drag {
    -webkit-app-region: no-drag;
}

.microphone-wave {
    position: absolute;
    border-radius: 9999px;
    border: 1px solid rgba(225, 29, 72, 0.35);
    opacity: 0;
    transition: transform 0.2s ease, opacity 0.25s ease;
    pointer-events: none;
}

@keyframes modal-fade-scale-in {
    0% {
        opacity: 0;
        transform: scale(0.95);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes modal-fade-scale-out {
    0% {
        opacity: 1;
        transform: scale(1);
    }
    100% {
        opacity: 0;
        transform: scale(0.95);
    }
}

.animate-modal-in {
    animation: modal-fade-scale-in 0.25s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.animate-modal-out {
    animation: modal-fade-scale-out 0.25s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* Fade анимации для микрофона */
@keyframes fade-in {
    from {
        opacity: 0;
        transform: scale(0);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes fade-out {
    from {
        opacity: 1;
        transform: scale(1);
    }
    to {
        opacity: 0;
        transform: scale(0);
    }
}

body.fade-in {
    animation: fade-in 0.32s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    transform-origin: center;
}

body.fade-out {
    animation: fade-out 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    transform-origin: center;
}

/* Glass Tooltip анимация */
@keyframes tooltip-fade-in {
    from {
        opacity: 0;
        transform: scale(0.92) translateY(-4px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

.animate-tooltip-fade-in {
    animation: tooltip-fade-in 0.15s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* Глобальные стили для выделения текста (белый текст на красном фоне) */
::selection {
    background-color: var(--color-primary);
    color: white;
}

::-moz-selection {
    background-color: var(--color-primary);
    color: white;
}
